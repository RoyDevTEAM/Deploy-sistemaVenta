<div class="dashboard-container">
  <div class="sidebar" >
    <div class="logo">
      <img src="https://www.raymandesign.com/wp-content/grand-media/image/logo_tdb.png" alt="Logo de la Empresa" style="max-width: 100%;">
    </div>
    
    <ul class="menu">
      <li *ngIf="isAdmin" class="nav-item">
        <a class="nav-link" routerLink="/dashboard" (click)="toggleChartsContent()">
          <i class="fas fa-money-bill-wave"></i> Dashboard
        </a>
      </li>
      <li *ngIf="isAdmin" class="nav-item">
        <a class="nav-link" routerLink="/dashboard/cliente" (click)="toggleChartsContent()">
          <i class="fas fa-users"></i> Clientes
        </a>
      </li>
      <li *ngIf="isAdmin" class="nav-item">
        <a class="nav-link" routerLink="/dashboard/usuario" (click)="toggleChartsContent()">
          <i class="fas fa-user"></i> Usuarios
        </a>
      </li>
      <li *ngIf="isAdmin" class="nav-item">
        <a class="nav-link" routerLink="/dashboard/producto" (click)="toggleChartsContent()">
          <i class="fas fa-box"></i> Productos
        </a>
      </li>
      <li *ngIf="isAdmin" class="nav-item">
        <a class="nav-link" routerLink="/dashboard/proveedores" (click)="toggleChartsContent()">
          <i class="fas fa-truck"></i> Proveedores
        </a>
      </li>
      <li *ngIf="isAdmin" class="nav-item">
        <a class="nav-link" (click)="toggleReportsMenu()">
          <i class="fas fa-file-alt"></i> Reportes <i class="fas fa-chevron-down"></i>
        </a>
        <ul class="submenu" *ngIf="showReportsMenu">
          <li><a  routerLink="/dashboard/reports/reporte-cliente">Reporte Cliente</a></li>
          <li><a routerLink="/dashboard/reports/reporte-producto">Reporte Producto</a></li>
          <li><a routerLink="/dashboard/reports/reporte-venta">Reporte Venta</a></li>
          <!-- Agrega más elementos de submenú según sea necesario -->
        </ul>
      </li>
      <li *ngIf="isLoggedIn" class="nav-item">
        <a class="nav-link" routerLink="/dashboard/venta" (click)="toggleChartsContent()">
          <i class="fas fa-money-bill-wave"></i> Vender
        </a>
      </li>
      <li *ngIf="isLoggedIn" class="nav-item">
        <a class="nav-link" routerLink="/dashboard/compra" (click)="toggleChartsContent()">
          <i class="fas fa-money-bill-wave"></i> Comprar
        </a>
      </li>
      <li class="nav-item">
        <a class="nav-link" routerLink="/dashboard/acerca-de" (click)="toggleChartsContent()">
          <i class="fas fa-info-circle"></i> Acerca de
        </a>
      </li>
      <li class="nav-item">
        <a class="nav-link" (click)="logout()">
          <i class="fas fa-sign-out-alt"></i> Cerrar sesión
          <span class="username" *ngIf="isLoggedIn">({{ userName }})</span>
        </a>
      </li>
    </ul>
  </div>

  <!-- Menú desplegable -->
  <nav class="navbar navbar-expand-lg navbar-dark bg-dark" style="height: 60px;"> <!-- Establecer altura fija -->
    <div class="container-fluid">
      <button class="navbar-toggler" type="button" (click)="toggleDropdownMenu()" aria-controls="dropdownMenu" aria-expanded="false" aria-label="Toggle dropdown menu">
        <span class="navbar-toggler-icon"></span>
      </button>
      <a class="navbar-brand" href="#" style="height: 100%; margin-top: -12px;"> <!-- Establecer altura del elemento y mover la imagen hacia arriba -->
        <img src="https://www.raymandesign.com/wp-content/grand-media/image/logo_tdb.png" alt="Logo" style="max-height: 60px;"> <!-- Aumentar tamaño de la imagen -->
      </a>
      <div class="collapse navbar-collapse">
        <!-- Aquí van el resto de elementos del menú superior -->
      </div>
    </div>
  </nav>

<!-- Menú desplegable -->
<div class="dropdown-menu" [ngClass]="{'show': showDropdownMenu}">
  <ul class="navbar-nav">
    <li *ngIf="isAdmin" class="nav-item">
      <a class="nav-link" routerLink="/dashboard" (click)="toggleDropdownMenu()">
        <i class="fas fa-money-bill-wave"></i> Dashboard
      </a>
    </li>
    <li *ngIf="isAdmin" class="nav-item">
      <a class="nav-link" routerLink="/dashboard/cliente" (click)="toggleDropdownMenu()">
        <i class="fas fa-users"></i> Clientes
      </a>
    </li>
    <li *ngIf="isAdmin" class="nav-item">
      <a class="nav-link" routerLink="/dashboard/usuario" (click)="toggleDropdownMenu()">
        <i class="fas fa-user"></i> Usuarios
      </a>
    </li>
    <li *ngIf="isAdmin" class="nav-item">
      <a class="nav-link" routerLink="/dashboard/producto" (click)="toggleDropdownMenu()">
        <i class="fas fa-box"></i> Productos
      </a>
    </li>
    <li *ngIf="isAdmin" class="nav-item">
      <a class="nav-link" routerLink="/dashboard/proveedores" (click)="toggleDropdownMenu()">
        <i class="fas fa-truck"></i> Proveedores
      </a>
    </li>
    <li *ngIf="isAdmin" class="nav-item">
      <a class="nav-link" routerLink="/dashboard/reporte" (click)="toggleDropdownMenu()">
        <i class="fas fa-file-alt"></i> Reportes
      </a>
    </li>
    <li *ngIf="isLoggedIn" class="nav-item">
      <a class="nav-link" routerLink="/dashboard/venta" (click)="toggleDropdownMenu()">
        <i class="fas fa-money-bill-wave"></i> Vender
      </a>
    </li>
    <li *ngIf="isLoggedIn" class="nav-item">
      <a class="nav-link" routerLink="/dashboard/compra" (click)="toggleDropdownMenu()">
        <i class="fas fa-money-bill-wave"></i> Comprar
      </a>
    </li>
    <li class="nav-item">
      <a class="nav-link" routerLink="/dashboard/acerca-de" (click)="toggleDropdownMenu()">
        <i class="fas fa-info-circle"></i> Acerca de
      </a>
    </li>
    <li class="nav-item">
      <a class="nav-link" (click)="logout(); toggleDropdownMenu()">
        <i class="fas fa-sign-out-alt"></i> Cerrar sesión
        <span class="username" *ngIf="isLoggedIn">({{ userName }})</span>
      </a>
    </li>
  </ul>
</div>

  
  

  <div class="main-content">
    <router-outlet></router-outlet>
    <div *ngIf="showChartsContent">
    <div class="row">
      <!-- Tarjeta de ventas totales del mes -->
<div class="col-md-4">
  <div class="card">
    <div class="card-header">Total de Ventas</div>
    <div class="card-body">
      <h5 class="card-title">${{ totalVentasMes.toFixed(2) }}</h5>
    </div>
  </div>
</div>

      <!-- Tarjeta de clientes nuevos -->
<div class="col-md-4">
  <div class="card">
    <div class="card-header">Clientes Nuevos</div>
    <div class="card-body">
      <ul class="list-group list-group-flush">
        <li *ngFor="let cliente of primerosClientes" class="list-group-item">{{ cliente.nombre_cliente }} {{ cliente.apellido_cliente }}</li>
      </ul>
    </div>
  </div>
</div>

     <!-- Tarjeta de productos bajos de stock -->
<div class="col-md-4">
  <div class="card">
    <div class="card-header">Productos Bajos de Stock</div>
    <div class="card-body">
      <ul class="list-group list-group-flush">
        <li class="list-group-item" *ngFor="let producto of productosBajoStock">
          {{ producto.nombre_producto }} - Stock: {{ producto.stock }}
        </li>
      </ul>
    </div>
  </div>
</div>

  
    <!-- Contenedor de los gráficos -->
    <div class="row mt-4">
      <!-- Gráfico 1: Total de ventas -->
      <div class="col-md-4">
        <div class="card">
          <div class="card-header">Total de Ventas</div>
          <div class="card-body">
            <app-total-ventas-ultimo-mes></app-total-ventas-ultimo-mes>
          </div>
        </div>
      </div>
      <!-- Gráfico 2: Métodos de pago -->
      <div class="col-md-4">
        <div class="card">
          <div class="card-header">Métodos de Pago</div>
          <div class="card-body">
            <app-grafico-metodos-pago></app-grafico-metodos-pago>       
             </div>

        </div>
      </div>
      <!-- Gráfico 3: Productos más vendidos -->
      <div class="col-md-4">
        <div class="card">
          <div class="card-header">Productos Más Vendidos</div>
          <div class="card-body">
            <app-grafico-productos-mas-vendidos></app-grafico-productos-mas-vendidos>
          </div>
        </div>
      </div>
    </div>
  </div>
  </div>
 
</div>
